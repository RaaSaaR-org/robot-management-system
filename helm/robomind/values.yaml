# values.yaml - RoboMindOS Helm Chart Default Values
# =============================================================================
# This file contains default configuration for the RoboMindOS Helm chart.
# Override these values in values-production.yaml or via --set flags.
# =============================================================================

# -----------------------------------------------------------------------------
# Global Settings
# -----------------------------------------------------------------------------
global:
  # Image pull secrets for private registries
  imagePullSecrets: []
  # Storage class for persistent volumes (empty = default)
  storageClass: ""

# -----------------------------------------------------------------------------
# Production Settings
# -----------------------------------------------------------------------------
production:
  # Require secrets to be set (fails deployment if missing)
  requireSecrets: false
  # Enable RBAC resources
  rbac:
    enabled: true

# -----------------------------------------------------------------------------
# Secrets Configuration
# -----------------------------------------------------------------------------
secrets:
  # JWT secret for authentication (required in production)
  jwtSecret: "dev-secret-change-in-production"
  # Google API key for AI services
  googleApiKey: ""
  # Gemini API key for robot agent
  geminiApiKey: ""

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------
postgres:
  enabled: true
  external:
    # Use external PostgreSQL (RDS, Cloud SQL, etc.)
    enabled: false
    # Connection string for external PostgreSQL
    host: ""
    port: 5432
    database: "robomind"
    username: "robomind"
    # Password should be set via secrets
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  auth:
    database: robomind
    username: robomind
    password: "robomind-dev"
  storage:
    size: 10Gi
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# -----------------------------------------------------------------------------
# NATS JetStream (Message Queue)
# -----------------------------------------------------------------------------
nats:
  enabled: true
  external:
    # Use external NATS (Synadia NGS, etc.)
    enabled: false
    # NATS server URLs (comma-separated)
    servers: ""
  image:
    repository: nats
    tag: "2.10-alpine"
    pullPolicy: IfNotPresent
  storage:
    size: 10Gi
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# -----------------------------------------------------------------------------
# RustFS Object Storage (S3-compatible)
# -----------------------------------------------------------------------------
rustfs:
  enabled: true
  external:
    # Use external S3 (AWS S3, GCS, etc.)
    enabled: false
    # S3 endpoint URL
    endpoint: ""
    # Region for AWS S3
    region: "us-east-1"
  image:
    repository: rustfs/rustfs
    tag: "latest"
    pullPolicy: IfNotPresent
  storage:
    size: 50Gi
  auth:
    # Access key for S3 authentication
    accessKey: "rustfsadmin"
    # Secret key for S3 authentication
    secretKey: "rustfsadmin"
  # Buckets to create on initialization
  buckets:
    - training-datasets
    - model-checkpoints
    - production-models
    - robot-logs
  init:
    image:
      repository: amazon/aws-cli
      tag: "latest"
      pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# -----------------------------------------------------------------------------
# MLflow Model Registry
# -----------------------------------------------------------------------------
mlflow:
  enabled: true
  external:
    # Use external MLflow (Databricks, managed MLflow, etc.)
    enabled: false
    # MLflow tracking URI
    trackingUri: ""
  image:
    repository: ghcr.io/mlflow/mlflow
    tag: "v2.10.0"
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# -----------------------------------------------------------------------------
# Server (Node.js API)
# -----------------------------------------------------------------------------
server:
  enabled: true
  image:
    repository: robomind/server
    tag: "latest"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 3001
  env:
    nodeEnv: production
    authDisabled: "true"
    publicUrl: ""
    corsOrigins: ""
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  # Health check configuration
  healthCheck:
    enabled: true
    path: /health
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 10
  # Horizontal Pod Autoscaler
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# -----------------------------------------------------------------------------
# App (React Frontend)
# -----------------------------------------------------------------------------
app:
  enabled: true
  image:
    repository: robomind/app
    tag: "latest"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 80
  # Ingress configuration for external access
  ingress:
    enabled: false
    className: ""
    annotations: {}
    hosts:
      - host: robomind.local
        paths:
          - path: /
            pathType: Prefix
    tls: []
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  # Horizontal Pod Autoscaler
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# -----------------------------------------------------------------------------
# Robot Agent (Simulated Robot)
# -----------------------------------------------------------------------------
robotAgent:
  enabled: true
  image:
    repository: robomind/robot-agent
    tag: "latest"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 41243
  env:
    robotId: "sim-robot-001"
    robotName: "SimBot-01"
    robotModel: "SimBot H1"
    robotClass: "standard"
    maxPayloadKg: "10"
    robotDescription: "A versatile humanoid robot for general tasks"
    initialX: "10.0"
    initialY: "10.0"
    initialZone: "Warehouse A"
    initialFloor: "1"
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# -----------------------------------------------------------------------------
# VLA Inference Server (Vision-Language-Action)
# -----------------------------------------------------------------------------
vlaInference:
  enabled: false
  image:
    repository: robomind/vla-inference
    tag: "latest"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    grpcPort: 50051
    metricsPort: 9090
  config:
    # Model type: pi0, openvla, etc.
    modelType: "pi0"
    # Device: cpu or cuda
    device: "cpu"
    # Number of gRPC workers
    maxWorkers: 4
  # GPU configuration (NVIDIA)
  gpu:
    enabled: false
    # Number of GPUs to request
    count: 1
    # Node selector for GPU nodes
    nodeSelector:
      nvidia.com/gpu.present: "true"
    # Tolerations for GPU nodes
    tolerations:
      - key: nvidia.com/gpu
        operator: Exists
        effect: NoSchedule
  resources:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "4Gi"
      cpu: "2000m"

# -----------------------------------------------------------------------------
# Service Account and RBAC
# -----------------------------------------------------------------------------
serviceAccount:
  # Create a service account
  create: true
  # Name of the service account (auto-generated if empty)
  name: ""
  # Annotations for the service account
  annotations: {}

# -----------------------------------------------------------------------------
# Pod Security
# -----------------------------------------------------------------------------
podSecurityContext:
  fsGroup: 1000

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

# -----------------------------------------------------------------------------
# Combined Ingress (App + Server API)
# -----------------------------------------------------------------------------
# This creates a single ingress that routes /api to server and / to app
# For separate app-only ingress, use app.ingress instead
ingress:
  enabled: false
  className: ""
  annotations: {}
  host: robomind.local
  tls: false
  tlsSecretName: ""

# -----------------------------------------------------------------------------
# Network Policy
# -----------------------------------------------------------------------------
networkPolicy:
  # Enable network policies for pod-to-pod communication restriction
  enabled: false

# -----------------------------------------------------------------------------
# Node Scheduling
# -----------------------------------------------------------------------------
nodeSelector: {}
tolerations: []
affinity: {}
